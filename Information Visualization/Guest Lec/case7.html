<html>

  <head>
    <script src="https://d3js.org/d3.v6.js"></script>
  </head>

  <body>
    <button onClick="handleClickEnter()">enter</button>
    <button onClick="handleClickExit()">exit</button>
    <div>
      <svg id="svg" height="600" width="600"></svg>
    </div>

  </body>
</html>

<script>
  var data = [
    { x: 100, y: 100, c: 'red' },
    { x: 200, y: 200, c: 'green' },
    { x: 300, y: 400, c: 'blue' },
  ]
  var svg = d3.select('#svg')

  function update(data) {
    svg
      .selectAll('circle')
      .data(data)
      .join('circle')
        .transition()
        .attr('cx', d => d.x)
        .attr('cy', d => d.y)
        .attr('r', 15)
        .attr('fill', d => d.c)
  }

  function handleClickEnter() {
    x = Math.random() * 600
    y = Math.random() * 600
    data.push({ 'x': x, 'y': y, c: 'yellow' })
    update(data)
  }
  
  function handleClickExit() {
    data.pop()
    update(data)
  }

  update(data)
</script>